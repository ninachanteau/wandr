function loadRestaurants(innerHTML) {
  const wrapper = document.querySelector('.wrapper');
  wrapper.innerHTML = innerHTML;
  // reload forms wepback script
  const head = document.querySelector("head");
  const scriptElement = document.createElement('script');
  scriptElement.src = '<%= javascript_pack_tag "forms" %>'.match(/src="(.*)">/)[1];
  head.appendChild(scriptElement);
};

function changeTitle(title) {
  const navbarTitle = document.querySelector('.navbar-title');
  if (navbarTitle) {
    navbarTitle.innerHTML = title;
  }
}

changeTitle('<%= j render "shared/navbar_title", trip: @trip, icon: "cutlery" %>');

loadRestaurants(`'<%= j render "index", restaurants: @restaurants, participation: @participation, trip: @trip, restaurant: @restaurant, my_restaurants: @my_restaurants, avatar: @avatar, trip_dates: @trip_dates %>'`);

function removeNotification() {
  const notification = document.getElementById('restaurants-notif');
  if (notification) {
    notification.remove();
  }
}

removeNotification()

